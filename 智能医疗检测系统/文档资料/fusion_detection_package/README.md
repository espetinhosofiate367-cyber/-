# 融合实时检测系统 (Fusion Real-time Detection System)

## 项目简介

融合实时检测系统是一个基于Python的医学影像实时监控和结节检测系统。该系统集成了串口通信、协议解析、实时数据处理和智能检测算法，专门用于医疗设备的实时监控和异常检测。

## 主要功能

### 🔍 实时检测功能
- **智能结节检测**: 基于高斯混合模型(GMM)的先进检测算法
- **风险评估**: 实时计算结节风险评分和形态学特征
- **历史追踪**: 结节发展历史记录和趋势分析
- **可视化展示**: 实时热力图和检测结果可视化

### 📡 串口通信
- **高性能协议解析**: 优化的数据帧解析器
- **实时数据流**: 低延迟串口数据读取和处理
- **多种显示模式**: 协议解析、实时检测、性能监控

### 📊 数据处理
- **压力矩阵处理**: 12x8压力传感器数据实时处理
- **数据导出**: CSV格式数据导出功能
- **性能优化**: 内存管理和处理速度优化

## 文件结构

```
fusion_detection_package/
├── fusion_real_time_detection.py    # 主程序文件
├── enhanced_detection_system.py     # 增强检测系统
├── optimized_serial_monitor.py      # 优化串口监控工具
├── requirements.txt                 # 依赖包列表
└── README.md                       # 说明文档
```

## 系统要求

- **操作系统**: Windows 10/11, Linux, macOS
- **Python版本**: Python 3.7+
- **内存**: 建议4GB以上
- **硬件**: 支持串口通信的设备

## 安装指南

### 1. 环境准备

确保已安装Python 3.7或更高版本：
```bash
python --version
```

### 2. 安装依赖

在项目目录下运行：
```bash
pip install -r requirements.txt
```

### 3. 验证安装

运行以下命令验证关键依赖：
```bash
python -c "import numpy, pandas, sklearn, matplotlib, serial; print('所有依赖安装成功')"
```

## 使用说明

### 启动主程序

```bash
python fusion_real_time_detection.py
```

### 基本操作流程

1. **连接设备**
   - 选择正确的串口
   - 设置波特率（默认115200）
   - 点击"连接"按钮

2. **选择检测模式**
   - 实时检测：显示检测结果和风险评估
   - 历史分析：查看历史检测数据
   - 数据导出：保存检测结果

3. **监控和分析**
   - 实时查看压力分布热力图
   - 观察结节检测结果
   - 监控系统性能指标

### 高级功能

#### 自定义检测参数
```python
# 在代码中调整检测阈值
detector.detection_threshold = 0.3  # 检测阈值
detector.risk_threshold = 0.7       # 高风险阈值
```

#### 数据导出格式
- **CSV格式**: 包含时间戳、压力矩阵数据、检测结果
- **图像格式**: 热力图和检测结果可视化
- **报告格式**: 详细的检测分析报告

## 技术特性

### 检测算法
- **高斯混合模型**: 用于异常区域识别
- **形态学操作**: 结节形状分析和优化
- **风险评分**: 基于多维特征的综合评估
- **历史追踪**: 结节发展趋势分析

### 性能优化
- **多线程处理**: 数据读取和处理分离
- **内存管理**: 智能缓存和垃圾回收
- **实时渲染**: 优化的图形更新机制
- **低延迟通信**: 高效的串口数据处理

### 用户界面
- **直观操作**: 简洁的图形用户界面
- **实时反馈**: 即时的检测结果显示
- **多视图模式**: 不同的数据展示方式
- **性能监控**: 系统运行状态实时监控

## 故障排除

### 常见问题

1. **串口连接失败**
   - 检查设备是否正确连接
   - 确认串口号和波特率设置
   - 检查串口是否被其他程序占用

2. **检测结果异常**
   - 验证输入数据格式
   - 检查检测参数设置
   - 确认传感器工作正常

3. **性能问题**
   - 调整缓存大小设置
   - 降低显示更新频率
   - 检查系统资源使用情况

### 调试模式

启用详细日志输出：
```bash
python fusion_real_time_detection.py --debug
```

## 开发指南

### 代码结构

- `FastProtocolParser`: 高性能协议解析器
- `EnhancedNoduleDetectionSystem`: 智能检测系统
- `FusionMonitorGUI`: 用户界面管理

### 扩展开发

1. **添加新的检测算法**
   ```python
   def custom_detection_method(self, data):
       # 实现自定义检测逻辑
       pass
   ```

2. **集成新的数据源**
   ```python
   def add_data_source(self, source_type, config):
       # 添加新的数据输入源
       pass
   ```

### API接口

系统提供以下主要API：
- `start_detection()`: 启动检测
- `stop_detection()`: 停止检测
- `get_results()`: 获取检测结果
- `export_data()`: 导出数据

## 更新日志

### v2.3 (当前版本)
- 优化检测算法性能
- 增强用户界面体验
- 修复编码问题
- 改进内存管理

### v2.2
- 添加历史数据分析功能
- 优化串口通信性能
- 增加数据导出选项

### v2.1
- 实现实时检测功能
- 添加风险评估算法
- 优化图形显示性能

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 技术支持

如有技术问题或建议，请联系开发团队：
- 邮箱: support@fusion-detection.com
- 文档: https://docs.fusion-detection.com
- 问题反馈: https://github.com/fusion-detection/issues

## 贡献指南

欢迎提交问题报告和功能建议。在提交代码前，请确保：
1. 代码符合PEP 8规范
2. 添加必要的测试用例
3. 更新相关文档

---

**注意**: 本系统仅用于研究和开发目的，在医疗环境中使用前请确保符合相关法规要求。